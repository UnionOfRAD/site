<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />	<title>Quickstart – li₃: The Definitive Guide v1.x – Documentation – li3 PHP-Framework</title>
		<link rel="stylesheet" href="/assets/v:__PROJECT_VERSION_BUILD__xyzz/css/reset.css" />
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Anonymous+Pro:400,700,400italic,700italic" />
	<link rel="stylesheet" href="/assets/v:__PROJECT_VERSION_BUILD__xyzz/css/u1m.css" />
	<link rel="stylesheet" href="/assets/v:__PROJECT_VERSION_BUILD__xyzz/css/li3_docs.css" />
	<link rel="stylesheet" href="/assets/v:__PROJECT_VERSION_BUILD__xyzz/css/highlight.css" />
	
	
	<script src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
	<script src="/assets/v:__PROJECT_VERSION_BUILD__xyzz/js/base.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/prism/0.0.1/prism.min.js"></script>
	
	
	<link rel="icon" href="/assets/ico/site.png">

		<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-11048416-4', 'auto');
	  ga('send', 'pageview');
	</script>
	</head>
<body class="layout-default li3-docs">
		<div id="container">
			<header class="main">
	<div class="left">
		<h1><a href="/" class="li3-logo">li3</a></h1>
	</div>
	<div class="right">
		<nav class="main-nav"><a href="http://news.li3.me">News</a><a href="/docs" class="active">Documentation</a><a href="/versions">Versions</a><a href="/present">Presentations</a><a href="/support">Community</a><a href="/development">Development</a></nav>	</div>
</header>							<nav class="crumbs">
	<ul itemscope itemtype="http://schema.org/BreadcrumbList">
			<li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
			<meta itemprop="position" content="1" />
							<a href="/docs" itemscope itemprop="item" itemtype="http://schema.org/Thing"><span itemprop="name">Documentation</span></a>
					</li>
			<li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
			<meta itemprop="position" content="2" />
							<a href="/docs/book/manual/1.x" itemscope itemprop="item" itemtype="http://schema.org/Thing"><span itemprop="name">li₃: The Definitive Guide (1.x)</span></a>
					</li>
			<li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
			<meta itemprop="position" content="3" />
							<span itemscope itemprop="item" itemtype="http://schema.org/Thing">
					<span itemprop="name">Quickstart</span>
				</span>
					</li>
		</ul>
</nav>						<div id="content">
				<article class="books-view has-aside-right">
	<nav class="aside aside-right">
		<h3 class="h-gamma">Contents</h3>
		<ul><li><a href="/docs/book/manual/1.x/common-tasks" class="">Common Tasks</a><ul><li><a href="/docs/book/manual/1.x/common-tasks/logging" class="">Logging</a><li><a href="/docs/book/manual/1.x/common-tasks/plugins" class="">Plugins</a><li><a href="/docs/book/manual/1.x/common-tasks/error-handling" class="">Error Handling</a><li><a href="/docs/book/manual/1.x/common-tasks/caching" class="">Caching</a><li><a href="/docs/book/manual/1.x/common-tasks/filters" class="">Filters</a><li><a href="/docs/book/manual/1.x/common-tasks/etags" class="">Etags</a><li><a href="/docs/book/manual/1.x/common-tasks/globalization" class="">Globalization</a><li><a href="/docs/book/manual/1.x/common-tasks/simple-authentication" class="">Simple Authentication</a><li><a href="/docs/book/manual/1.x/common-tasks/simple-auth-user" class="">Simple Auth User</a><li><a href="/docs/book/manual/1.x/common-tasks/console-applications" class="">Console Applications</a></ul><li><a href="/docs/book/manual/1.x/appendices" class="">Appendices</a><ul><li><a href="/docs/book/manual/1.x/appendices/faqs" class="">FAQs</a><li><a href="/docs/book/manual/1.x/appendices/using-in-other-applications" class="">Using In Other Applications</a></ul><li><a href="/docs/book/manual/1.x/quickstart" class="active">Quickstart</a><li><a href="/docs/book/manual/1.x/controllers" class="">Controllers</a><ul><li><a href="/docs/book/manual/1.x/controllers/actions" class="">Actions</a><li><a href="/docs/book/manual/1.x/controllers/flow-control" class="">Flow Control</a><li><a href="/docs/book/manual/1.x/controllers/parameters" class="">Parameters</a><li><a href="/docs/book/manual/1.x/controllers/type-rendering-detection" class="">Type Rendering Detection</a><li><a href="/docs/book/manual/1.x/controllers/routing" class="">Routing</a></ul><li><a href="/docs/book/manual/1.x/installation" class="">Installation</a><ul><li><a href="/docs/book/manual/1.x/installation/requirements" class="">Requirements</a><li><a href="/docs/book/manual/1.x/installation/troubleshooting" class="">Troubleshooting</a><li><a href="/docs/book/manual/1.x/installation/web-servers" class="">Web Servers</a></ul><li><a href="/docs/book/manual/1.x/architecture" class="">Architecture</a><ul><li><a href="/docs/book/manual/1.x/architecture/file-structure" class="">File Structure</a><li><a href="/docs/book/manual/1.x/architecture/response-lifecycle" class="">Response Lifecycle</a><li><a href="/docs/book/manual/1.x/architecture/aop" class="">AOP</a><li><a href="/docs/book/manual/1.x/architecture/mvc" class="">MVC</a><li><a href="/docs/book/manual/1.x/architecture/objects" class="">Objects</a></ul><li><a href="/docs/book/manual/1.x/quality-code" class="">Quality Code</a><ul><li><a href="/docs/book/manual/1.x/quality-code/fixtures" class="">Fixtures</a><li><a href="/docs/book/manual/1.x/quality-code/analysis" class="">Analysis</a><li><a href="/docs/book/manual/1.x/quality-code/testing" class="">Testing</a><li><a href="/docs/book/manual/1.x/quality-code/security" class="">Security</a></ul><li><a href="/docs/book/manual/1.x/configuration" class="">Configuration</a><ul><li><a href="/docs/book/manual/1.x/configuration/environment" class="">Environment</a><li><a href="/docs/book/manual/1.x/configuration/bootstrapping" class="">Bootstrapping</a><li><a href="/docs/book/manual/1.x/configuration/third-party-libraries" class="">Third Party Libraries</a></ul><li><a href="/docs/book/manual/1.x/views" class="">Views</a><ul><li><a href="/docs/book/manual/1.x/views/layouts" class="">Layouts</a><li><a href="/docs/book/manual/1.x/views/elements" class="">Elements</a><li><a href="/docs/book/manual/1.x/views/helpers" class="">Helpers</a><li><a href="/docs/book/manual/1.x/views/static-content" class="">Static Content</a><li><a href="/docs/book/manual/1.x/views/auto-escaping" class="">Auto Escaping</a></ul><li><a href="/docs/book/manual/1.x/models" class="">Models</a><ul><li><a href="/docs/book/manual/1.x/models/mongodb" class="">Mongodb</a><li><a href="/docs/book/manual/1.x/models/meta" class="">Meta</a><li><a href="/docs/book/manual/1.x/models/relationships" class="">Relationships</a><li><a href="/docs/book/manual/1.x/models/saving" class="">Saving</a><li><a href="/docs/book/manual/1.x/models/using-data-sources" class="">Using Data Sources</a><li><a href="/docs/book/manual/1.x/models/adding-functions" class="">Adding Functions</a><li><a href="/docs/book/manual/1.x/models/data-mutation" class="">Data Mutation</a><li><a href="/docs/book/manual/1.x/models/connections" class="">Connections</a><li><a href="/docs/book/manual/1.x/models/creating-data-sources" class="">Creating Data Sources</a><li><a href="/docs/book/manual/1.x/models/querying" class="">Querying</a><li><a href="/docs/book/manual/1.x/models/validation" class="">Validation</a></ul></ul>	</nav>
	<div class="body">
		<h1><a id="quickstart" class="anchor" href="#quickstart">Quickstart</a></h1>
<h2><a id="the-quintessential-blog-tutorial" class="anchor" href="#the-quintessential-blog-tutorial">The Quintessential Blog Tutorial</a></h2>
<p>Thanks for trying out li3! This section of the manual is for PHP users who want to see what the framework can do. Diving into the code like this is a great way to get a feel for Rapid Application Development!</p>
<p>By the time you have finished this section you will have built a simple blogging platform that reads and writes from a database. Later sections of the manual explain the concepts you'll use here in more detail.</p>
<h2><a id="setting-up" class="anchor" href="#setting-up">Setting Up</a></h2>
<p>First things first: let's make sure our first app is installed and working. If you haven't already installed one then check out the <a href="./installation">installation guide</a> in this manual. Make sure to follow each of the steps in the guide carefully.</p>
<p>After completing installation, you should be able to navigate your browser to the path that you installed your intitial app (e.g. <code>http://app.dev</code> or <code>http://127.0.0.1:8080</code>, the rest of this blog tutorial assumes you have installed it there) and it will display a page that starts like the snippet below.</p>
<p>Note that some of the ticks and crosses may be different depending on what is set up on your system, but all of the boxes should be green or blue. If they aren't then please follow the instructions beneath them to fix the problem.</p>
<p><img src="/assets/img/default_app_welcome.png" alt="Example initial li3 homepage" title="Example initial li3 homepage"></p>
<h2><a id="mongo-db" class="anchor" href="#mongo-db">MongoDB</a></h2>
<p>We also need some sort of persistent storage layer for our blog posts. In this example, we're going to use <a href="http://www.mongodb.org">MongoDB</a>, a NoSQL database. One of the advantages of a NoSQL database is that you don't have to specify the schema upfront, so it works perfectly with our RAD approach to development!</p>
<div class="note note-info">
	The framework has support for both relational (MySQL, MariaDB, PostgreSQL, SQLite) and NoSQL databases (MongoDB, CouchDB) and is one of the first frameworks to support both types of databases through one single ORM/ODM hybrid.
</div>
<p>To initialize the database, follow the instructions for your operating system inside the <em>Installation</em> chapter of the <a href="http://docs.mongodb.org/manual/">official MongoDB manual</a> and finally, start up the database engine.</p>
<p>So that PHP can talk to Mongo you'll also need to install the PHP MongoDB driver. This is outlined
in the <a href="http://docs.mongodb.org/manual/">official MongoDB manual</a> under <a href="http://docs.mongodb.org/ecosystem/drivers/php/">PHP Driver</a>. Once the driver is installed, we'll have to restart our webserver to make changes take effect.</p>
<p>Now, if you refresh the browser page for your installation, you should see a green tick by MongoDB like in the image above. If you  still have a cross or run into any other problems along the way, MongoDB's <a href="http://docs.mongodb.org/manual/tutorial/getting-started/">Getting Started guide</a> is a great place to get some help.</p>
<p>Now that we have a database up and running and talking to PHP, let's tell li3 about it. Do this by editing <code>config/bootstrap/connections.php</code>. First, remove any connections that exist in the file, then add a new connection for our blog:</p>
<pre><code class="language-php">// MongoDB Connection
Connections::add('default', [
	'type' =&gt;  'MongoDb',
	'database' =&gt; 'blog',
	'host' =&gt; 'localhost'
]);
</code></pre>
<p>The first parameter just names the connection something that can be read by people. li3 also automatically uses the <code>'default'</code> connection elsewhere in our code unless otherwise specified.</p>
<p>The second array-type parameter is used to specify the connection. In this example, we're specifying a connection with <code>'type'</code> <code>'MongoDb'</code> for a database called <code>'blog'</code> on the <code>'localhost'</code> MongoDB server. These parameters can be specified in a number of different ways - see the <code>config/bootstrap/connections.php</code> file for more information.</p>
<div class="note note-hint">
	Editing bootstrap files like this is a common way of configuring li3. See the <a href="./configuration/bootstrapping">Bootstrapping Guide</a> for more detail on how to configure the framework.
</div>
<p>Our application is now set up and talking to the MongoDB database server, so we are ready to begin coding our blogging platform!</p>
<h2><a id="mvc-starts-with-m" class="anchor" href="#mvc-starts-with-m">MVC Starts with M</a></h2>
<p>li3 uses the <a href="./architecture/mvc">MVC pattern</a>. If you're not familiar with using this pattern in web development you'll want to read up on it later, but for now let's create your first model, a <code>Posts</code> model that will handle the domain logic for blog posts.</p>
<p>First, create a new file at <code>models/Posts.php</code>. If you name your files and structure your code according to li3's conventions, the core library code will automatically do the heavy (and monotonous) lifting. This means that the model file itself is short and simple.</p>
<pre><code class="language-php">namespace app\models;

class Posts extends \lithium\data\Model {}
</code></pre>
<p>There's a lot going on (for free!) in the background here. First, li3 knows we're using our default connection because we haven't specified otherwise. Secondly, since our model is named <code>Posts</code>, it'll use a MongoDB collection called 'posts'. We've also inherited a lot of useful methods for querying the database, and we'll learn more about some of those in later sections of this tutorial.</p>
<p>But wait, what? What about the schema setup? Actually, MongoDB doesn't require you to set it up first - it just waits until you want to insert or query the database and handles the request appropriately. That's RAD!</p>
<h2><a id="in-control" class="anchor" href="#in-control">In Control</a></h2>
<p>The controller setup is just as simple when getting started. Create a new file at <code>controllers/PostsController.php</code> and fill it with the following:</p>
<pre><code class="language-php">namespace app\controllers;

class PostsController extends \lithium\action\Controller {}
</code></pre>
<p>You may have noticed a trend: filenames are CamelCase, as are classnames. Folder paths match their respective namespace, and are under_scored. This is part of the li3 <a href="/docs/book/specs/1.x/accepted/LSR-0-coding">coding convention</a>, and you should stick to it to take full advantage of the framework's automagic.</p>
<p>Let's go ahead and create an initial action as well. Create a new <code>index()</code> function in your newly created controller. Before we try and link all three of the model, controller and viewer together, let's just set up a simple action that pushes some dummy data to the view. Here's how it's done:</p>
<pre><code class="language-php">namespace app\controllers;

class PostsController extends \lithium\action\Controller {

	public function index() {
		return ['foo' =&gt; 'bar', 'title' =&gt; 'Posts'];
	}
}
</code></pre>
<p>li3 actions send data to the view by returning an associative array that determines the respective view's variables. In the example above, our view will have access to the string <code>'bar'</code> in <code>$foo</code> and <code>'Posts'</code> in <code>$title</code> (<code>$title</code> will be used to set the page's title tag). This setup is also handy for fans of the <a href="http://php.net/compact"><code>compact()</code> function</a>. If I have a series of variables I'd like to pass along, it's as easy as:</p>
<pre><code class="language-php">return compact('lions', 'tigers', 'bears');
</code></pre>
<h2><a id="what-a-view" class="anchor" href="#what-a-view">What a View</a></h2>
<p>Next, let's create a <code>View</code> that uses the dummy data from <code>PostsController::index()</code>.</p>
<p>Start by creating a new file at <code>views/posts/index.html.php</code> (you'll need to create the posts directory). Let's start simple, and print out the data we so carefully crafted in our controller:</p>
<pre><code class="language-php">li3 is less dense than &lt;?= $foo ?&gt;ium.
</code></pre>
<p>Save this file, and now you can view the Posts index page by pointing your browser to <code>http://app.dev/posts</code>. li3 handles the routing and dispatching behind the scenes. You can learn more about setting up custom routes in the <a href="../controllers/routing">controller section</a> of the manual.</p>
<p>What you're seeing used here in this view's code is also the default and preferred way to output data to an HTML page in li3. The short tags (<code>&lt;?= ... ?&gt;</code>) are automatically rewritten by li3 to escape the output and keep you safe from the legions of attacks based on unescaped output. This means that the view code you're seeing doesn't end up as short tags when it gets to PHP's parser, so don't worry about your PHP installation or short tag handling. If you really need it, there's also always <code>&lt;?php echo ... ?&gt;</code>.</p>
<h2><a id="first-post" class="anchor" href="#first-post">First Post!</a></h2>
<p>Now that you've built a li3 application that displays some dummy data, it's time to extend it so that users can write posts.</p>
<p>First, create a new action in <code>PostsController</code> called <code>add()</code>.</p>
<pre><code class="language-php">namespace app\controllers;

use app\models\Posts;

class PostsController extends \lithium\action\Controller {

	public function add() {
		$post = Posts::create();
		return compact('post');
	}
}
</code></pre>
<p>Before you can use a model and its methods we must tell that we're planning to use the moodel class via the <code>use</code> statement. The statement needs to be added at the beginning of our <code>PostsController.php</code> file, but <em>after</em> the namespace declaration.</p>
<p>Currently - inside the action - we just create an empty post object and pass it to the view which we'll create next in a new file at <code>views/posts/add.html.php</code>:</p>
<pre><code class="language-php">&lt;?= $this-&gt;form-&gt;create($post) ?&gt;
	&lt;?= $this-&gt;form-&gt;field('title') ?&gt;
	&lt;?= $this-&gt;form-&gt;field('body', ['type' =&gt; 'textarea']) ?&gt;
	&lt;?= $this-&gt;form-&gt;submit('save') ?&gt;
&lt;?= $this-&gt;form-&gt;end() ?&gt;
</code></pre>
<p>This view code sets up a simple HTML form, using the <code>Form</code> helper. Don't stress the details of what the helper is doing at this point - what it outputs is most important for now.</p>
<p>When we call <code>$this-&gt;form-&gt;create()</code> we pass the currently empty post object as the first argument. This binds the post to the form we're about to create and allows the <code>Form</code> helper to <em>know</em> about the post schema. Note that we don't include an <code>url</code> parameter when creating the form. li3 assumes you mean the controller method that corresponds to the name of the view (in this case <code>add()</code>) and want to use POST. This is another example of how li3 defaults to the most common case so that your code can be as concise and expressive as possible - in this case, it's pointed to <code>http://app.dev/posts/add</code>, just as we need.</p>
<p>Let's move back to the controller, and handle the data the HTML form is sending us. Here's what our <code>add()</code> action should now look like:</p>
<pre><code class="language-php">namespace app\controllers;

use app\models\Posts;

class PostsController extends \lithium\action\Controller {

	public function add() {
		$post = Posts::create();
		$success = false;

		if ($this-&gt;request-&gt;data &amp;&amp; $post-&gt;save($this-&gt;request-&gt;data)) {
			$success = true;
		}
		return compact('post', 'success');
	}
}
</code></pre>
<p>Because the form we've created in the view submits its data back to the same controller action, all controller code for adding a new post happens in this method.</p>
<p>First, the method checks to see if there's any POST data in the response. In this case, the data is passed into <code>save()</code> which updates the empty post object and saves it at the same time.</p>
<p>The result of the save operation (<code>$success</code>) is then passed back to the view so we can display a message to the user, and we can use that data in the view to show some sort of status message:</p>
<pre><code class="language-php">&lt;?php if ($success): ?&gt;
	&lt;p&gt;Post Successfully Saved&lt;/p&gt;
&lt;?php endif ?&gt;
</code></pre>
<p>To give you a little more of an idea what li3's doing "behind the scenes" here, the following pieces of code are equivalent:</p>
<pre><code class="language-php">$post = Posts::create(['title' =&gt; 'First Post', 'body' =&gt; 'Body text!']);
$post-&gt;save();

// or:

$post = Posts::create();
$post-&gt;title = 'First Post';
$post-&gt;body  = 'Body Text!';
$post-&gt;save();

// or:

$post = Posts::create();
$post-&gt;save(['title' =&gt; 'First Post', 'body' =&gt; 'Body text!']);
</code></pre>
<p>Feel free now to have a play with this method and use your browser to add a few posts to your blog. Coming up next: displaying them!</p>
<h2><a id="viewing-your-posts" class="anchor" href="#viewing-your-posts">Viewing your posts</a></h2>
<p>Now that we've stocked our database, let's use our Posts model to pull the data. We can do this by rewriting the <code>index()</code> action in the <code>PostsController</code> to pull a list of posts and hand it to the view:</p>
<pre><code class="language-php">public function index() {
	$posts = Posts::all();
	return compact('posts');
}
</code></pre>
<p>The object returned from <code>Posts:all()</code> - which is equivalent to <code>Posts::find('all')</code> - is a li3 <code>Document</code> object. The <code>Document</code> object is a response object that handles MongoDB responses more appropriately, since it's not a traditional RDBMS. Don't worry too much about this now: just understand that what you're getting back isn't plain array-based data.</p>
<p>If for some reason you need to inspect the data (for debugging purposes, for example), you can use the <code>to()</code> method on the document object.</p>
<pre><code class="language-php">var_dump($posts-&gt;to('array'));
// example output:
//
// [0]=&gt;
//  [3] {
//    ["_id"]=&gt;
//    string(24) "4afddab78bd3c34f41757396"
//    ["title"]=&gt;
//    string(11) "First Post!"
//    ["body"]=&gt;
//    string(7) "Woooooo"
//  }
</code></pre>
<p>If you're curious, you might also try <code>$posts-&gt;to('json')</code> to see some additional options. To enable this functionality, remember to uncomment the <code>require __DIR__ . '/bootstrap/media.php';</code> line in <code>config/bootstrap.php</code>.</p>
<p>At this point, our index view should be aware of the <code>$posts</code> <code>Document</code> object. Iterating through that object and printing out our post information is easy. Replace the existing code in <code>views/posts/index.html.php</code> with the following:</p>
<pre><code class="language-php">&lt;?php foreach ($posts as $post): ?&gt;
&lt;article&gt;
	&lt;h1&gt;&lt;?= $post-&gt;title ?&gt;&lt;/h1&gt;
	&lt;p&gt;&lt;?= $post-&gt;body ?&gt;&lt;/p&gt;
&lt;/article&gt;
&lt;?php endforeach ?&gt;
</code></pre>
<p>As you can see, <code>Posts</code> model <code>Document</code> objects expose their data through properties. Once this view has been saved, fire up your browser and check <code>http://app.dev/posts</code> to see the output.</p>
<h2><a id="where-to-go-from-here" class="anchor" href="#where-to-go-from-here">Where to go from here</a></h2>
<p>To get an even deeper understanding of the framework dive into the documentation for
<a href="./models">Models</a>, <a href="./controllers">Controllers</a> and <a href="./views">Views</a>. <a href="./common-tasks">Common Tasks</a> has hands-on guides for implementing user authentication workflows, integrating logging, caching and more.</p>
<p>Be sure to also read our <a href="./quality-code/security">Security Guide</a> to get information on how to built secure applications right from the start.</p>
	</div>
</article>			</div>
		</div>
		<footer class="main">
	<div class="area"></div>
	<div class="area"></div>
	<div class="area"></div>
	<div class="area"></div>

	<div class="social">
		<a href="https://github.com/unionofrad" target="new">GitHub</a>		<span class="separator">/</span>
		<a href="https://twitter.com/unionofrad" target="new">Twitter</a>		<span class="separator">/</span>
		<a href="http://www.reddit.com/r/li3" target="new">Reddit</a>		<span class="separator">/</span>
		<a href="https://stackoverflow.com/questions/tagged/lithium" target="new">Stack Overflow</a>	</div>
	<div class="testimonial">
		<img src="/assets/v:__PROJECT_VERSION_BUILD__xyzz/img/testimonials/10.png" alt="Testimonial Image" />		<p>I think it's time you started<br />
writing better code.</p>
	</div>
	<div class="copyright">
		Pretty much everything is (c) 2009-2024 and beyond, the <a href="http://unionofrad.org">Union of RAD</a>.	</div>
</footer>	</body>
</body>
</html>
